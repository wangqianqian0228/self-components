{"remainingRequest":"C:\\Users\\47876\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\self-component\\components\\e-form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\self-component\\components\\e-form.vue","mtime":1632570716776},{"path":"C:\\Users\\47876\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\47876\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\47876\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3ZpZGUoKXsNCiAgICByZXR1cm4gew0KICAgICAgJ2Vmb3JtJzogdGhpcw0KICAgIH0gICANCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBtb2RlbDogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdDogKCkgPT4gKHt9KQ0KICAgIH0sDQogICAgcnVsZXM6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7fSkNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyB2YWxpZGF0ZShjYWxsYmFjayl7DQogICAgICAvKiANCiAgICAgIDEuIOaJvuWIsOeItue6p2Zvcm3kuIvpnaLnmoTmiYDmnInnmoRmb3JtLWl0ZW0NCiAgICAgIDIuIOeci+aJgOacieeahGZvcm0taXRlbeaYr+WQpuespuWQiOinhOiMgz/mgI7kuYjnnIsgDQogICAgICAgICAg6K6p5omA5pyJ55qEZm9ybS1pdGVt6YO95qCh6aqM5a6MKOaJp+ihjHZhbGlkYXRlKCkpLOWFqOmDqOmAmui/h+i/lOWbnnRydWUs5ZCm5YiZLOaJk+WNsOWHuumUmeivr+S/oeaBry4NCiAgICAgICovDQoNCiAgICAgIGxldCBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuIC8vIOmbhuWQiA0KICAgICAgbGV0IGFyciA9IFtdIC8v5Yib5bu65LiA5Liq56m65pWw57uELOadpeWtmOaUvuaJvuWIsOeahOaJgOacieeahGZvcm0taXRlbQ0KICAgICAgZnVuY3Rpb24gZmluZEZvcm1JdGVtKGNoaWxkcmVuKXsNCiAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7DQogICAgICAgICAgLy8g6ZyA6KaB5qCh6aqM55qE5omN5Lya5Y67cHVzaOWIsGFycumHjOmdouWOuw0KICAgICAgICAgIGlmKGNoaWxkLiRvcHRpb25zLm5hbWUgPT09ICdlLWZvcm0taXRlbScgJiYgY2hpbGQucHJvcCl7DQogICAgICAgICAgICBhcnIucHVzaChjaGlsZCkNCiAgICAgICAgICB9DQogICAgICAgICAgaWYoY2hpbGQuJGNoaWxkcmVuKXsNCiAgICAgICAgICAgIGZpbmRGb3JtSXRlbShjaGlsZC4kY2hpbGRyZW4pDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgZmluZEZvcm1JdGVtKGNoaWxkcmVuKQ0KICAgICAgdHJ5ew0KICAgICAgICAvL+etieW+hei/mTPkuKpQcm9taXNl6YO95omn6KGM5a6MDQogICAgICAgIGxldCBicnIgPSBhcnIubWFwKGUgPT4gIGUudmFsaWRhdGUoKSkNCiAgICAgICAgY29uc29sZS5sb2coYnJyKSAvLyDmmK/kuIDkuKpwcm9taXNlDQogICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGJycikgLy8g562J5b6F5omA5pyJ55qEcHJvbWlzZemDveaJp+ihjOWujOS5i+WQjizlho3ljrvmiafooYzkuIvpnaLnmoTku6PnoIENCiAgICAgICAgY2FsbGJhY2sodHJ1ZSkgLy/miafooYzkvKDov4fmnaXnmoTlm57osIMNCiAgICAgIH1jYXRjaHsNCiAgICAgICAgLy8g5pyJ6ZSZ6K+vDQogICAgICAgIGNhbGxiYWNrKGZhbHNlKQ0KICAgICAgfQ0KICAgICAgDQogICAgICANCiAgICAgIA0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["e-form.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA","file":"e-form.vue","sourceRoot":"components","sourcesContent":["<template>\r\n<!-- 阻止表单默认提交 -->\r\n  <form action=\"\" >\r\n    <slot></slot>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  provide(){\r\n    return {\r\n      'eform': this\r\n    }   \r\n  },\r\n  props: {\r\n    model: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    rules: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  methods: {\r\n    async validate(callback){\r\n      /* \r\n      1. 找到父级form下面的所有的form-item\r\n      2. 看所有的form-item是否符合规范?怎么看 \r\n          让所有的form-item都校验完(执行validate()),全部通过返回true,否则,打印出错误信息.\r\n      */\r\n\r\n      let children = this.$children // 集合\r\n      let arr = [] //创建一个空数组,来存放找到的所有的form-item\r\n      function findFormItem(children){\r\n        children.forEach(child => {\r\n          // 需要校验的才会去push到arr里面去\r\n          if(child.$options.name === 'e-form-item' && child.prop){\r\n            arr.push(child)\r\n          }\r\n          if(child.$children){\r\n            findFormItem(child.$children)\r\n          }\r\n        })\r\n      }\r\n      findFormItem(children)\r\n      try{\r\n        //等待这3个Promise都执行完\r\n        let brr = arr.map(e =>  e.validate())\r\n        console.log(brr) // 是一个promise\r\n        await Promise.all(brr) // 等待所有的promise都执行完之后,再去执行下面的代码\r\n        callback(true) //执行传过来的回调\r\n      }catch{\r\n        // 有错误\r\n        callback(false)\r\n      }\r\n      \r\n      \r\n      \r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}